---

---

<div class="relative flex items-center" id="search-toggle-container">
    <button
        id="search-button"
        type="button"
        aria-label="Toggle search form"
        class="transition duration-150 p-2 rounded-full"
    >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
    </button>

    <form
        action="/buscar"
        method="GET"
        id="search-form"
        class="absolute right-0 flex items-center transform translate-x-full transition-all duration-300 opacity-0 invisible pointer-events-none"
    >
        <input
            type="search"
            name="q"
            placeholder="Buscar..."
            aria-label="Campo de bÃºsqueda"
            class="w-40 px-3 py-1.5 rounded-l-md text-sm text-institucional-azul-900 bg-white focus:outline-none focus:ring-2 focus:ring-institucional-azul-600"
        />
        <button
            type="submit"
            aria-label="Submit search"
            class="bg-institucional-oro text-institucional-azul-900 p-2 rounded-r-md hover:opacity-80 transition duration-150"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
        </button>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const button = document.getElementById('search-button')
        const form = document.getElementById('search-form')

        if (button && form) {
            button.addEventListener('click', () => {
                const isOpen = form.classList.toggle('translate-x-full')

                form.classList.toggle('opacity-0')
                form.classList.toggle('invisible')
                form.classList.toggle('pointer-events-none')

                if (!isOpen) {
                    const input = form.querySelector(
                        'input',
                    ) as HTMLInputElement | null
                    if (input) input.focus()
                }
            })

            document.addEventListener('click', (event) => {
                const container = document.getElementById(
                    'search-toggle-container',
                )
                const target = event.target
                if (
                    container &&
                    target instanceof Node &&
                    !container.contains(target) &&
                    !form.classList.contains('translate-x-full')
                ) {
                    form.classList.add(
                        'translate-x-full',
                        'opacity-0',
                        'invisible',
                        'pointer-events-none',
                    )
                }
            })
        }
    })
</script>
